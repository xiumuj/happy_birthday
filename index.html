<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö†Ô∏è Á≥ªÁªüË≠¶Êä•ÔºöÊ£ÄÊµãÂà∞30Â≤ÅÁîüÁâ©‰Ωì ‚ö†Ô∏è</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <style>
        :root {
            --neon-pink: #ff2a6d;
            --neon-blue: #05d9e8;
            --neon-purple: #d300c5;
            --dark-bg: #0d0221;
            --glow: 0 0 10px var(--neon-blue), 0 0 20px var(--neon-pink);
        }
        
        body {
            background-color: var(--dark-bg);
            color: #fff;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-image: 
                linear-gradient(rgba(5, 217, 232, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(5, 217, 232, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .cyber-border {
            border: 2px solid var(--neon-pink);
            box-shadow: var(--glow);
            position: relative;
        }
        
        .cyber-border::before {
            content: "";
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 1px solid var(--neon-blue);
            z-index: -1;
        }
        
        header {
            text-align: center;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        h1 {
            font-size: 3rem;
            background: linear-gradient(90deg, var(--neon-pink), var(--neon-purple), var(--neon-blue));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 15px rgba(255, 42, 109, 0.5);
            margin-bottom: 1rem;
            animation: flicker 1.5s infinite alternate;
        }
        
        @keyframes flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                text-shadow: 
                    0 0 5px var(--neon-pink),
                    0 0 10px var(--neon-purple),
                    0 0 20px var(--neon-blue);
            }
            20%, 24%, 55% {
                text-shadow: none;
            }
        }
        
        .age-counter {
            font-size: 5rem;
            font-weight: bold;
            color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue);
            margin: 1rem 0;
        }
        
        #memory-map {
            height: 700px;
            width: 90%;
            margin: 2rem auto;
            position: relative;
        }
        
        .map-overlay {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(13, 2, 33, 0.8);
            padding: 1rem;
            border: 1px solid var(--neon-blue);
            box-shadow: var(--glow);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            overflow: auto;
        }
        
        .modal-content {
            background-color: var(--dark-bg);
            margin: 5% auto;
            padding: 20px;
            border: 2px solid var(--neon-pink);
            width: 80%;
            max-width: 800px;
            position: relative;
            box-shadow: var(--glow);
        }
        
        .close {
            color: var(--neon-blue);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.5);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px var(--neon-blue);
        }
        
        .close:hover {
            color: var(--neon-pink);
            box-shadow: 0 0 15px var(--neon-pink);
        }
        
        .photo-slide {
            display: none;
            text-align: center;
            position: relative;
        }
        
        .photo-slide img {
            max-width: 100%;
            border: 1px solid var(--neon-blue);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(5, 217, 232, 0.5);
        }
        
        .photo-slide img:hover {
            box-shadow: 0 0 15px var(--neon-pink);
        }
        
        .photo-caption {
            margin-top: 1rem;
            color: var(--neon-blue);
            font-size: 1.2rem;
        }
        
        .console {
            width: 90%;
            margin: 2rem auto;
            padding: 1rem;
            background-color: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--neon-blue);
            height: 200px;
            overflow-y: scroll;
            font-family: monospace;
        }
        
        .console-line {
            margin: 0.5rem 0;
            color: var(--neon-blue);
        }
        
        .console-input {
            display: flex;
            margin-top: 0.5rem;
        }
        
        .prompt {
            color: var(--neon-pink);
            margin-right: 0.5rem;
        }
        
        .cyber-button {
            background: transparent;
            color: var(--neon-blue);
            border: 1px solid var(--neon-blue);
            padding: 0.5rem 1rem;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            margin: 0.5rem;
            transition: all 0.3s;
        }
        
        .cyber-button:hover {
            background: var(--neon-blue);
            color: var(--dark-bg);
            box-shadow: 0 0 10px var(--neon-blue), 0 0 20px var(--neon-blue);
        }
        
        .cyber-button::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(5, 217, 232, 0.4), transparent);
            transition: all 0.5s;
        }
        
        .cyber-button:hover::before {
            left: 100%;
        }
        
        /* Ëã±ÈõÑÊ®°ÂùóÂä®Áîª */
        @keyframes borderPulse {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
            100% { transform: translateY(0) rotate(360deg); }
        }
        
        @keyframes expandLine {
            0% { transform: scaleX(0); opacity: 0; }
            50% { transform: scaleX(1); opacity: 0.7; }
            100% { transform: scaleX(0); opacity: 0; }
        }
        
        .cyber-card {
            transition: all 0.5s ease;
        }
        
        .cyber-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px var(--neon-blue), 0 0 40px var(--neon-pink);
        }
        
        /* ÂìçÂ∫îÂºèÊ†∑Âºè */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            #memory-map {
                height: 300px;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
            
            .cyber-card {
                padding: 2rem;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .age-counter {
                font-size: 3rem;
            }
            
            #memory-map {
                height: 200px;
            }
            
            .cyber-button {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
                margin: 0.3rem;
            }
            
            .modal-content {
                width: 98%;
                margin: 5% auto;
                padding: 10px;
            }
            
            .photo-thumbnail {
                width: 80px;
                height: 80px;
            }
            
            .console {
                height: 150px;
                font-size: 0.8rem;
            }
            
            .hero-content {
                padding: 1rem;
            }
            
            .hero-content h2 {
                font-size: 1.5rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
        }

        /* ÁÖßÁâáÁº©Áï•ÂõæÊ†∑Âºè */
        .photo-thumbnail {
            width: 120px;
            height: 120px;
            object-fit: cover;
            margin: 8px;
            border: 2px solid var(--neon-purple);
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 4px;
            box-shadow: 0 0 5px rgba(5, 217, 232, 0.3);
        }

        .photo-thumbnail:hover {
            transform: scale(1.1);
            border-color: var(--neon-pink);
            box-shadow: 0 0 10px var(--neon-pink);
        }

        .thumbnail-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 10px;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            scrollbar-width: thin;
            scrollbar-color: var(--neon-blue) var(--dark-bg);
        }
        
        .thumbnail-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .thumbnail-container::-webkit-scrollbar-track {
            background: var(--dark-bg);
            border-radius: 10px;
        }
        
        .thumbnail-container::-webkit-scrollbar-thumb {
            background-color: var(--neon-blue);
            border-radius: 10px;
            border: 2px solid var(--dark-bg);
        }
        
        /* ÁÖßÁâáÂ¢ôÂä®ÁîªÊïàÊûú */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .photo-thumbnail {
            animation: fadeIn 0.3s ease forwards;
            animation-delay: calc(0.05s * var(--photo-index, 0));
            opacity: 0;
        }

        /* ‰ø°Â∞ÅÂíå‰ø°Á∫∏Ê†∑Âºè */
        .envelope-modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            overflow: auto;
        }

        .envelope {
            position: relative;
            width: 300px;
            height: 200px;
            margin: 50px auto;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
            border-radius: 5px;
            box-shadow: var(--glow);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .envelope:hover {
            transform: scale(1.05);
        }

        .envelope::before {
            content: "‚ù§";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .letter-modal {
            display: none;
            position: fixed;
            z-index: 3100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            overflow: auto;
        }

        .letter-content {
            background: var(--dark-bg);
            margin: 5% auto;
            padding: 30px;
            width: 80%;
            max-width: 800px;
            border: 2px solid var(--neon-blue);
            box-shadow: var(--glow);
            position: relative;
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--neon-blue);
            white-space: pre-line;
        }

        .letter-close {
            position: absolute;
            right: 20px;
            top: 20px;
            color: var(--neon-pink);
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .letter-close:hover {
            background: var(--neon-pink);
            color: var(--dark-bg);
            box-shadow: 0 0 10px var(--neon-pink);
        }
    </style>
</head>
<body>
    <!-- ÂºÄÂ±èÂä®Áîª - Ëã±ÈõÑÊ®°Âùó -->
    <div id="splash-screen" class="animate__animated animate__fadeIn" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3000; overflow: hidden;">
        <!-- ËÉåÊôØÂõæÁâá - ÂèØ‰ª•Êñπ‰æøÊõøÊç¢ -->
        <div class="hero-bg" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('https://pic.tangsong.qzz.io/birthday/moermansike_4.jpg'); background-size: cover; background-position: center; filter: brightness(0.3) blur(5px); z-index: -1;"></div>
        
        <!-- ÁΩëÊ†ºÂè†Âä†Â±Ç -->
        <div class="grid-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: linear-gradient(rgba(5, 217, 232, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(5, 217, 232, 0.1) 1px, transparent 1px); background-size: 20px 20px; opacity: 0.7; z-index: 0;"></div>
        
        <!-- ÂÜÖÂÆπÂÆπÂô® -->
        <div class="hero-content" style="position: relative; z-index: 1; height: 100%; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 2rem;">
            <div class="cyber-card" style="background: rgba(13, 2, 33, 0.7); border: 2px solid var(--neon-pink); box-shadow: var(--glow); padding: 3rem; max-width: 600px; width: 90%; text-align: center; position: relative; overflow: hidden;">
                <!-- Èó™ÁÉÅËæπÊ°ÜÊïàÊûú -->
                <div class="card-border-effect" style="position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px; border: 2px solid var(--neon-blue); opacity: 0; animation: borderPulse 3s infinite alternate;"></div>
                
                <div id="cake" style="font-size: 5rem; margin-bottom: 2rem; position: relative; display: inline-block;">
                    üéÇ
                    <div class="glow-effect" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, rgba(255, 42, 109, 0.4) 0%, transparent 70%); filter: blur(10px); z-index: -1;"></div>
                </div>
                
                <h2 class="animate__animated animate__fadeInUp" style="color: var(--neon-pink); text-align: center; padding: 0 1rem; font-size: 2.2rem; margin-bottom: 1.5rem; text-shadow: 0 0 10px var(--neon-pink);">‚ö†Ô∏è Á≥ªÁªüË≠¶Êä• ‚ö†Ô∏è</h2>
                <p class="animate__animated animate__fadeInUp animate__delay-1s" style="color: var(--neon-blue); font-size: 1.5rem; margin-bottom: 2rem; text-shadow: 0 0 5px var(--neon-blue);">Ê£ÄÊµãÂà∞ÂèØÁà±ÁîüÁâ©Âç≥Â∞Ü30Â≤ÅÔºÅ</p>
                
                <button id="enter-site" class="cyber-button animate__animated animate__pulse animate__infinite" style="margin-top: 1rem; font-size: 1.2rem; padding: 0.8rem 2rem; background: linear-gradient(45deg, rgba(5, 217, 232, 0.2), rgba(211, 0, 197, 0.2)); border-width: 2px;">ÊéàÊùÉËÆøÈóÆ</button>
            </div>
            
            <!-- Ë£ÖÈ•∞ÂÖÉÁ¥† -->
            <div class="decorative-elements">
                <div class="cyber-circle" style="position: absolute; top: 15%; left: 15%; width: 50px; height: 50px; border: 1px solid var(--neon-blue); border-radius: 50%; opacity: 0.5; animation: float 8s infinite ease-in-out;"></div>
                <div class="cyber-circle" style="position: absolute; bottom: 20%; right: 10%; width: 80px; height: 80px; border: 1px solid var(--neon-pink); border-radius: 50%; opacity: 0.5; animation: float 10s infinite ease-in-out reverse;"></div>
                <div class="cyber-line" style="position: absolute; top: 40%; left: 0; width: 100px; height: 1px; background: linear-gradient(90deg, transparent, var(--neon-purple), transparent); opacity: 0.7; animation: expandLine 7s infinite;"></div>
                <div class="cyber-line" style="position: absolute; bottom: 30%; right: 0; width: 150px; height: 1px; background: linear-gradient(90deg, transparent, var(--neon-blue), transparent); opacity: 0.7; animation: expandLine 5s infinite reverse;"></div>
            </div>
        </div>
    </div>

    <!-- ‰∏ªÈ°µÈù¢ÂÜÖÂÆπ -->
    <div id="main-content" style="display: none;">
        <header class="cyber-border">
            <h1 class="animate__animated animate__fadeInDown">SYSTEM_CELEBRATION.EXE</h1>
            <div class="age-counter" id="age-counter">29.9999</div>
            <p style="color: var(--neon-blue);">>>> Ê≠£Âú®ÂàùÂßãÂåñ30Â≤ÅÂçèËÆÆ <<<</p>
            <div style="display: flex; justify-content: center; margin-top: 1rem;">
                <button class="cyber-button" onclick="showModal('photos'); playClickSound()" onmouseover="playClickSound()">Êü•ÁúãËÆ∞ÂøÜ</button>
                <button class="cyber-button" onclick="activateGlitch(); playClickSound()" onmouseover="playClickSound()">ÂºÄÂßãËÆ∞ÂøÜÂä†ËΩΩ</button>
            </div>
        </header>

        <!-- Ë∂≥ËøπÂú∞Âõæ -->
        <section style="margin: 3rem 0;">
            <h2 style="text-align: center; color: var(--neon-purple); margin-bottom: 1rem;">>>> ËÆ∞ÂøÜÂùêÊ†áËøΩË∏™Á≥ªÁªü <<<</h2>
            <div id="memory-map" class="cyber-border"></div>
            <div class="map-overlay">
                <p style="margin: 0; color: var(--neon-blue);">Â∑≤ËÆ∞ÂΩïÂùêÊ†áÁÇπ: <span id="location-count">0</span></p>
                <p style="margin: 0; color: var(--neon-pink);">ÊÄªÈáåÁ®ã: <span id="total-distance">0</span> km</p>
            </div>
        </section>

        <!-- ÁÖßÁâáÊ®°ÊÄÅÊ°Ü -->
        <div id="photo-modal" class="modal">
            <div class="modal-content cyber-border">
                <span class="close" onclick="closeModal('photos')" style="position: absolute; right: 15px; top: 10px; font-size: 30px; z-index: 1000;">&times;</span>
                <div class="photo-slide">
                    <img src="" alt="ËÆ∞ÂøÜÁÖßÁâá" style="max-height: 60vh;">
                    <div class="photo-caption"></div>
                </div>
                <h3 style="color: var(--neon-blue); text-align: center; margin: 15px 0 5px 0;">ËÆ∞ÂøÜÁÖßÁâáÂ¢ô</h3>
                <div class="thumbnail-container" id="thumbnail-container"></div>
                <div style="text-align: center; margin-top: 1rem;">
                    <button class="cyber-button" onclick="plusSlides(-1)">‰∏ä‰∏ÄÂº†</button>
                    <button class="cyber-button" onclick="plusSlides(1)">‰∏ã‰∏ÄÂº†</button>
                </div>
            </div>
        </div>

        <!-- ÊéßÂà∂Âè∞ -->
        <section class="cyber-border" style="width: 90%; margin: 2rem auto; padding: 1rem;">
            <h2 style="text-align: center; color: var(--neon-blue);">>>> Á≥ªÁªüÊéßÂà∂Âè∞ <<<</h2>
            <div class="console" id="console-output">
                <div class="console-line">> Á≥ªÁªüÂêØÂä®‰∏≠...</div>
                <div class="console-line">> Âä†ËΩΩ30Â≤ÅÂ∫ÜÁ•ùÂçèËÆÆ...</div>
                <div class="console-line">> Ê≠£Âú®Êâ´ÊèèËÆ∞ÂøÜÊï∞ÊçÆÂ∫ì...</div>
                <div class="console-line">> Ë≠¶Âëä: Ê£ÄÊµãÂà∞ËøáÂ§öÁ¨ëÂÆπÊï∞ÊçÆ!</div>
                <div class="console-line">> ÂàùÂßãÂåñÂú∞ÂõæÁ≥ªÁªü...</div>
            </div>
            <div class="console-input">
                <span class="prompt">></span>
                <input type="text" style="flex-grow: 1; background: transparent; border: none; border-bottom: 1px solid var(--neon-blue); color: white; font-family: monospace; outline: none;" id="console-input" placeholder="ËæìÂÖ• HELP Ëé∑ÂèñÂëΩ‰ª§ÂàóË°®">
            </div>
        </section>

        <!-- ‰ø°Â∞ÅÊ®°ÊÄÅÊ°Ü -->
        <div id="envelope-modal" class="envelope-modal">
            <div class="envelope" onclick="showLetter()"></div>
        </div>

        <!-- ‰ø°Á∫∏Ê®°ÊÄÅÊ°Ü -->
        <div id="letter-modal" class="letter-modal">
            <div class="letter-content">
                <span class="letter-close" onclick="closeLetter()">&times;</span>
                <div id="letter-text"></div>
            </div>
        </div>

        <!-- È°µËÑö -->
        <footer style="text-align: center; padding: 2rem; color: var(--neon-blue);">
            <p>SYSTEM STATUS: CELEBRATION_MODE_ACTIVATED</p>
            <p>¬© 2025 Áà±‰Ω†ÁöÑËíúÈ¶ôÁî∑Â≠© | ÂÆâÂÖ®Á≠âÁ∫ß: ÁªùÂØÜ</p>
        </footer>
    </div>

    <script src="https://webapi.amap.com/maps/js/loader.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script>
        // ÊòæÁ§∫‰ø°Â∞ÅÂíå‰ø°Á∫∏ÁöÑÂáΩÊï∞
        function showLetter() {
            // ÂÅúÊ≠¢ÂΩìÂâçËÉåÊôØÈü≥‰πê
            if (window.currentAudio) {
                window.currentAudio.pause();
                window.currentAudio.currentTime = 0;
            }
            // Á°Æ‰øùÂÅúÊ≠¢birthday.mp3
            if (window.birthdayAudio) {
                window.birthdayAudio.pause();
                window.birthdayAudio.currentTime = 0;
            }
            // Êí≠ÊîæÊñ∞ÁöÑËÉåÊôØÈü≥‰πê
            window.currentAudio = new Audio('music/loveyou.mp3');
            window.currentAudio.play();
            
            document.getElementById('envelope-modal').style.display = 'none';
            document.getElementById('letter-modal').style.display = 'block';
            document.getElementById('letter-text').innerText = [
                "‰∫≤Áà±ÁöÑÊ∑ªÂáÄÔºö",
                "‰ªäÂ§©ÊòØ‰Ω†30Â≤ÅÁîüÊó•,‰πüÊòØÂíå‰Ω†Áõ∏ËØÜÁöÑÁ¨¨ÂÖ´Âπ¥ÔºåÁªìÂ©öÁöÑÁ¨¨‰∏âÂπ¥ÔºåÊó∂Èó¥ÂÉèÊàë‰ª¨Ëá™È©æÊ∏∏Êó∂ÁõòÂ±±ÂÖ¨Ë∑ØÁöÑËΩ¨ËßíÔºåÊòéÊòéËÆ∞ÂæóÊØè‰∏™ËΩ¨ÂºØÊó∂ÁöÑÂøÉË∑≥ÔºåÂõûÂ§¥ÊúõÂéªÂç¥Â∑≤ÊòØ‰∏ÄË∑ØÁπÅËä±„ÄÇ",
                "ËøòËÆ∞ÂæóÊç∑ÈáåÂà´Â∞îÂç°È£òÈõ™ÁöÑÂ§úÊôöÔºå‰Ω†Â∏¶ÁùÄÂéöÂéöÁöÑÊâãÂ•óÈÄóÂºÑË∑üËøáÊù•ÁöÑÈõ™Ê©áÁä¨Ôºå‰ª•Èò≤Êö¥Èõ™Â∞ÅË∑ØÊàë‰ª¨‰∏ãÂÆöÂÜ≥ÂøÉËøûÂ§úÊâæËΩ¶ÈÄÉÁ¶ªÔºõÊë©Â∞îÊõºÊñØÂÖãÂáõÂÜΩÁöÑÂØíÈ£é‰∏ãÔºåÊàë‰ª¨Á´ôÂú®ÈòøÂªñÊ≤ôÂÖ¨Âõ≠ÁöÑÊúÄÈ´òÁÇπÔºåÁú∫ÊúõËøúÂ§ÑÁöÑÁ†ÅÂ§¥ÂíåÊùëÂ∫Ñ„ÄÇËøô‰∫õÊóÖÁ®ãÂÉèÂõ¥Â∑æ‰∏ÄËà¨ÔºåÈíàËÑöÁªÜÂØÜÂç¥Ê∏©ÊöñË∏èÂÆû„ÄÇÂêéÊù•Êàë‰ª¨ÂéªËøáÁöÑÂú∞ÊñπÔºåÂú∞Âõæ‰∏äÈÉΩÂèòÊàê‰∫Ü‰∏ìÂ±ûÁöÑÂùêÊ†á‚Äî‚ÄîÊõºË∞∑ÁöÑÂ§ßÁöáÂÆ´ÔºåÊôÆÂêâÂ≤õÁöÑÊµ™Ëä±ÔºåÈïøÈáéÁöÑÊà∑ÈöêÁ•ûÁ§æÔºåÂáΩÈ¶ÜÂ±±ÁöÑÂ§ßÈõ™ÔºåÂåóÊµ∑ÈÅìÁöÑÊ∏©Ê≥âÈõæÊ∞î„ÄÇ",
                "Â∑•‰ΩúÂêéÁöÑÊÑüÊÉÖÂ∞ë‰∫Ü‰∫õËΩ∞ËΩ∞ÁÉàÁÉàÔºåÂÄíÂÉè‰∏ÄÁ¢óÊ°ÇËä±ÈÜ™Á≥üÔºåÁîúÂë≥Ê≤âÊ∑ÄÂú®ÁîüÊ¥ªË§∂Áö±Èáå„ÄÇ‰∏ãÁè≠Âíå‰Ω†‰∏ÄÂùóÂõûÂÆ∂ÔºåÂú®ÂÆ¢ÂéÖÈáåÁúã‰Ω†ÂÅöÈ•≠ÔºåÈÄó‰∏Ä‰ºöÁå´Áå´ÔºåÊó∂‰∏çÊó∂ÂéªÂé®ÊàøÊâìÊâì‰∏ãÊâãÔºå‰∏ÄÂùóËæπÁúãÁªºËâ∫ËäÇÁõÆËæπÂêÉÈ•≠„ÄÇ\nÊàëÂÅ∂Â∞î‰ºöÊÉ≥,Â¶ÇÊûúÊàëÁé∞Âú®ËøòÊòØ‰∏Ä‰∏™‰∫∫Ôºå‰ºöËøáÁùÄÊÄéÊ†∑ÁöÑÁîüÊ¥ªÂë¢ÔºåËÇØÂÆöÊòØÂçïË∞ÉÊó†Ë∂£ÁöÑÔºåÂ¶ÇÂêå‰Ω†‰∏çÂú®ÁöÑÂë®Êú´„ÄÇ",
                "30Â≤ÅÊòØÊñ∞ÁöÑËµ∑ÁÇπ,‰ΩÜÂØπÊàëËÄåË®ÄÔºå‰Ω†‰æùÁÑ∂ÊòØÈÇ£‰∏™Âú®È¶ñÊ¨°Ëá™È©æÂú®ÂçóÊæ≥Â§ßÊ°•‰∏äÊ¨¢ÂëºÈõÄË∑ÉÁöÑÂßëÂ®ò„ÄÇË∞¢Ë∞¢‰Ω†ËÆ©Êàë‰ªé'ÂÆÖÁî∑'ÂèòÊàê'ÊóÖ‰∫∫'Ôºå‰ªé'Êú®Â§¥'ÂèòÊàê‰ºöÁ¨®ÊãôË°®ËææÁà±ÁöÑ‰∏àÂ§´„ÄÇÂæÄÂêé‰ΩôÁîüÔºåÊÉ≥Âíå‰Ω†ÁªßÁª≠Êî∂ÈõÜÊõ¥Â§öÂπ≥Âá°ÁöÑÁû¨Èó¥ÔºöÂèØËÉΩÊòØÊâìÂèå‰∫∫Ê∏∏ÊàèÊó∂ÁöÑ‰∫íÁõ∏Âò≤ËÆΩÔºåÂèØËÉΩÊòØÂú®‰Ω†ÁîªÁîªÊó∂ÈÄíËøáÂéªÁöÑ‰∏ÄÊùØÁÉ≠Ê∞¥ÔºåÂèØËÉΩÊòØÊàëÂú®Â∑•‰ΩúÊó∂‰Ω†Á™ÅÁÑ∂ÂÜ≤ËøáÊù•ÁöÑ‰∏Ä‰∏™Êã•Êä±„ÄÇ",
                "Êàë‰æùÁÑ∂Ê≤°ËÆ∞‰Ωè‰Ω†Âú®ÁªìÂ©öÂÖ∏Á§º‰∏äÁöÑÈÇ£Âè•‰ªÄ‰πàÊ†ë‰ªÄ‰πàÈ£éÊòØÊÄé‰πàËØ¥ÁöÑÔºåÂè™Â•ΩÁî®ÁÆÄÂçïÁöÑËØùËØ≠ÈÄÅ‰∏äÊàëÁöÑÁ•ùÁ¶è„ÄÇ",
                "ÁîüÊó•Âø´‰πêÔºåÊàëÁöÑÂßëÂ®ò„ÄÇ",
                "Ê∞∏ËøúÔºåÁà±‰Ω†Â¶ÇÂàùÔºÅ"
            ].join('\n\n');
        }

        function closeLetter() {
            document.getElementById('letter-modal').style.display = 'none';
        }

        // Â¢ûÂº∫ÁöÑÂºÄÂ±èÂä®Áîª
        document.addEventListener('DOMContentLoaded', function() {
            // Ê∑ªÂä†ÂàùÂßãÂä®ÁîªÊïàÊûú
            setTimeout(function() {
                const heroContent = document.querySelector('.hero-content');
                if (heroContent) {
                    heroContent.style.opacity = '1';
                }
            }, 500);
        });
        
        document.getElementById('enter-site').addEventListener('click', function() {
            // ÊåâÈíÆÁÇπÂáªÊïàÊûú
            this.classList.remove('animate__pulse', 'animate__infinite');
            this.classList.add('animate__rubberBand');
            
            // Êí≠ÊîæÁÇπÂáªÈü≥Êïà
            playClickSound();
            
function playClickSound() {
    var clickSound = new Audio('sounds/click.mp3');
    clickSound.play();
}

// Êí≠ÊîæËÉåÊôØÈü≥‰πê
            window.birthdayAudio = new Audio('music/birthday.mp3');
            var isPlaying = true;
            
            // Ê∑ªÂä†ÂñáÂè≠ÂõæÊ†áÁÇπÂáª‰∫ã‰ª∂
            const speakerIcon = document.getElementById('speaker-icon');
            speakerIcon.addEventListener('click', function() {
                if (isPlaying) {
                    window.birthdayAudio.pause();
                    speakerIcon.textContent = 'üîà';
                } else {
                    window.birthdayAudio.play();
                    speakerIcon.textContent = 'üîä';
                }
                isPlaying = !isPlaying;
            });
            window.birthdayAudio.play();
            
            // ËõãÁ≥ïÁàÜÁÇ∏Âä®Áîª
            gsap.to("#cake", {
                scale: 1.5,
                duration: 0.3,
                onComplete: function() {
                    document.getElementById('cake').textContent = "üí•";
                    
                    // Ê∑ªÂä†ÁàÜÁÇ∏ÊïàÊûú
                    const explosionEffect = document.createElement('div');
                    explosionEffect.style.position = 'absolute';
                    explosionEffect.style.top = '0';
                    explosionEffect.style.left = '0';
                    explosionEffect.style.width = '100%';
                    explosionEffect.style.height = '100%';
                    explosionEffect.style.background = 'radial-gradient(circle, rgba(255, 42, 109, 0.8) 0%, transparent 70%)';
                    explosionEffect.style.animation = 'fadeOut 1s forwards';
                    explosionEffect.style.zIndex = '10';
                    document.getElementById('cake').parentNode.appendChild(explosionEffect);
                    
                    // Ê∑ªÂä†ÁàÜÁÇ∏Âä®ÁîªÊ†∑Âºè
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes fadeOut {
                            0% { opacity: 1; transform: scale(0); }
                            50% { opacity: 0.8; transform: scale(2); }
                            100% { opacity: 0; transform: scale(3); }
                        }
                    `;
                    document.head.appendChild(style);
                    
                    // Ê∑°Âá∫Êï¥‰∏™ÂºÄÂ±è
                    gsap.to(".cyber-card", {
                        y: -50,
                        opacity: 0,
                        duration: 0.8,
                        ease: "power2.out"
                    });
                    
                    gsap.to(".decorative-elements", {
                        opacity: 0,
                        duration: 0.5
                    });
                    
                    gsap.to("#splash-screen", {
                        opacity: 0,
                        duration: 1.2,
                        delay: 0.3,
                        onComplete: function() {
                            document.getElementById('splash-screen').style.display = "none";
                            document.getElementById('main-content').style.display = "block";
                            initPage();
                        }
                    });
                }
            });
        });

        // Âπ¥ÈæÑËÆ°Êï∞Âô®Âä®Áîª
        function animateAgeCounter() {
            let counter = { value: 29.9999 };
            gsap.to(counter, {
                value: 30,
                duration: 3,
                onUpdate: function() {
                    document.getElementById('age-counter').textContent = counter.value.toFixed(4);
                },
                onComplete: function() {
                    document.getElementById('age-counter').textContent = "30.0000";
                    // Ê∑ªÂä†Èó™ÁÉÅÊïàÊûú
                    setInterval(function() {
                        document.getElementById('age-counter').style.textShadow = "0 0 10px " + (Math.random() > 0.5 ? "var(--neon-pink)" : "var(--neon-blue)");
                    }, 300);
                }
            });
        }

        // ÂàùÂßãÂåñÂú∞Âõæ
        function initMap() {
            const map = L.map('memory-map', {
                center: [30, 0],
                zoom: 2,
                crs: L.CRS.EPSG3857
            });
            
            // ‰ΩøÁî®È´òÂæ∑Âú∞ÂõæÂõæÂ±Ç
            L.tileLayer('https://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}', {
                subdomains: ['1', '2', '3', '4'],
                attribution: '&copy; È´òÂæ∑Âú∞Âõæ',
                className: 'cyber-map'
            }).addTo(map);
            
            // Ëá™ÂÆö‰πâÂú∞ÂõæÊ†∑Âºè
            const style = document.createElement('style');
            style.textContent = `
                .cyber-map {
                    filter: hue-rotate(180deg) contrast(1.2) saturate(1.5) brightness(0.7) invert(100%);
                }
                .cyber-map .leaflet-tile {
                    border: 1px solid rgba(5, 217, 232, 0.1) !important;
                }
            `;
            document.head.appendChild(style);
            
            // Ê∑ªÂä†ËÆ∞ÂøÜÁÇπ - Áé∞Âú®‰ΩøÁî®Êú¨Âú∞imagesÊñá‰ª∂Â§π‰∏≠ÁöÑÁÖßÁâá
            // ‰ΩøÁî®window.memories‰ΩøÂÖ∂Êàê‰∏∫ÂÖ®Â±ÄÂèòÈáèÔºå‰ª•‰æøÂÖ∂‰ªñÂáΩÊï∞ÂèØ‰ª•ËÆøÈóÆ
            window.memories = [
                {
                    latlng: [22.5431, 114.0579],
                    title: "Ê∑±Âú≥",
                    content: "Ëµ∑ÁÇπÔºåÊñ∞ÁöÑËµ∑ÁÇπÔºÅ",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_4.jpg", caption: "Ê∑±Âú≥Â∏Ç‰∏≠ÂøÉÁöÑÁπÅÂçéÊôØË±°" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_5.jpg", caption: "Ê∑±Âú≥ÊπæÁöÑÁæé‰∏ΩÊó•ËêΩ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_6.jpg", caption: "Ê∑±Âú≥ÊπæÂÖ¨Âõ≠" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_7.jpg", caption: "Ê∑±Âú≥Â§úÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_9.jpg", caption: "Ê∑±Âú≥ÂüéÂ∏ÇÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_10.jpg", caption: "Ê∑±Âú≥Âú∞Ê†áÂª∫Á≠ë" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_11.jpg", caption: "Ê∑±Âú≥Áé∞‰ª£ÊôØËßÇ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_3.jpg", caption: "Ê∑±Âú≥Â§úÊôØ" }
                    ],
                    iconColor: "#ff2a6d"
                },
                {
                    latlng: [39.9042, 116.4074],
                    title: "Âåó‰∫¨",
                    content: "Á´ãÊ∞¥Ê°•‰º†Â•á",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/beijing_1.jpg", caption: "ÊïÖÂÆ´ÁöÑÂÆè‰ºüÂª∫Á≠ë" },
                        { url: "https://pic.tangsong.qzz.io/birthday/beijing_2.jpg", caption: "ÈïøÂüé‰∏äÁöÑÂ£Æ‰∏ΩÈ£éÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/beijing_3.jpg", caption: "Âåó‰∫¨ÂüéÂ∏ÇÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/beijing_4.jpg", caption: "Âåó‰∫¨ÊñáÂåñÊôØËßÇ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/beijing_5.jpg", caption: "Âåó‰∫¨ÂéÜÂè≤ÈÅóËøπ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/beijing_6.jpg", caption: "Âåó‰∫¨Áé∞‰ª£Âª∫Á≠ë" }
                    ],
                    iconColor: "#05d9e8"
                },
                {
                    latlng: [31.2304, 121.4737],
                    title: "‰∏äÊµ∑",
                    content: "Ëã¶ÈÄºÁöÑÂÆû‰π†‰πãÊóÖ",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/shanghai_1.jpg", caption: "Â§ñÊª©Â§úÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shanghai_2.jpg", caption: "ÈôÜÂÆ∂Âò¥ÈáëËûçÂå∫" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shanghai_3.jpg", caption: "‰∏äÊµ∑ÂüéÂ∏ÇÈ£éÂÖâ" }
                    ],
                    iconColor: "#d300c5"
                },
                {
                    latlng: [45.8038, 126.5340],
                    title: "ÂìàÂ∞îÊª®",
                    content: "ÂÜ∞Èõ™ÂçïË°£ÂãáÈóØÂÜ∞‰πãÂüéÔºåÂÜªÊàêÁãó",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/haerbin_1.jpg", caption: "ÂÜ∞Èõ™Â§ß‰∏ñÁïå" },
                        { url: "https://pic.tangsong.qzz.io/birthday/haerbin_2.jpg", caption: "‰∏≠Â§ÆÂ§ßË°ó" },
                        { url: "https://pic.tangsong.qzz.io/birthday/haerbin_3.jpg", caption: "ÂìàÂ∞îÊª®È£éÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/haerbin_4.jpg", caption: "ÂìàÂ∞îÊª®ÂüéÂ∏ÇÊôØËßÇ" }
                    ],
                    iconColor: "#ff2a6d"
                },
                {
                    latlng: [29.3392, 104.7786],
                    title: "Ëá™Ë¥°",
                    content: "ÊàëÊù•Âà∞Ôºå‰Ω†ÁöÑÂüéÂ∏Ç",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/zigong_1.jpg", caption: "Ëá™Ë¥°ÊÅêÈæôÂçöÁâ©È¶Ü" },
                        { url: "https://pic.tangsong.qzz.io/birthday/zigong_2.jpg", caption: "Ëá™Ë¥°ÂΩ©ÁÅØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/zigong_3.jpg", caption: "Ëá™Ë¥°È£éÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/zigong_4.jpg", caption: "Ëá™Ë¥°ÂüéÂ∏ÇÊôØËßÇ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/zigong_5.jpg", caption: "Ëá™Ë¥°ÈÅó‰∫ß" }
                    ],
                    iconColor: "#05d9e8"
                },
                {
                    latlng: [21.9162, 100.0719],
    latlng: [18.2528, 109.5120],
                    title: "‰∏â‰∫ö",
                    content: "È∏üÂ∑¢ÈÖíÂ∫óÈùûÂ∏∏‰∏çÈîô'",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/sanya_1.jpg", caption: "‰∏â‰∫öÊπæÁöÑÊ§∞ÊûóÊµ∑ÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/sanya_2.jpg", caption: "‰∫öÈæôÊπæÁæé‰∏ΩÁöÑÊ≤ôÊª©" },
                        { url: "https://pic.tangsong.qzz.io/birthday/sanya_3.jpg", caption: "‰∏â‰∫öÁÉ≠Â∏¶È£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/sanya_4.jpg", caption: "‰∏â‰∫öÊó•ËêΩÁæéÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/sanya_5.jpg", caption: "‰∏â‰∫öÊµ∑Êª©È£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/sanya_6.jpg", caption: "‰∏â‰∫öÂ∫¶ÂÅáÈÖíÂ∫ó" },
                        { url: "https://pic.tangsong.qzz.io/birthday/sanya_7.jpg", caption: "‰∏â‰∫öÁÉ≠Â∏¶Ê§çÁâ©" },
                        { url: "https://pic.tangsong.qzz.io/birthday/sanya_8.jpg", caption: "‰∏â‰∫öÊ∞¥‰∏äÊ¥ªÂä®" }
                    ],
                    iconColor: "#ff2a6d"
                },
                {
                    latlng: [21.9162, 100.0719],
                    title: "Ë•øÂèåÁâàÁ∫≥",
                    content: "Ê≥∞ÂõΩÁéãÂ¶Écosplay",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/xishuangbanna_3.jpg", caption: "Ë•øÂèåÁâàÁ∫≥Â§úÂ∏Ç" },
                        { url: "https://pic.tangsong.qzz.io/birthday/xishuangbanna_4.jpg", caption: "ÂÇ£ÊóèËàûËπàË°®Êºî" },
                        { url: "https://pic.tangsong.qzz.io/birthday/xishuangbanna_5.jpg", caption: "ÁÉ≠Â∏¶Ê§çÁâ©Âõ≠" },
                        { url: "https://pic.tangsong.qzz.io/birthday/xishuangbanna_6.jpg", caption: "Ê∞ëÊóèÊùëÂØ®" },
                        { url: "https://pic.tangsong.qzz.io/birthday/xishuangbanna_1.jpg", caption: "Ë•øÂèåÁâàÁ∫≥Êó•ËêΩ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/xishuangbanna_2.jpg", caption: "Â§úÈó¥ÁÅØÂÖâÁßÄ" }
                    ],
                    iconColor: "#05d9e8"
                },
                {
                    latlng: [35.2339, 115.4808],
                    title: "ËèèÊ≥Ω",
                    content: "‰Ω†Êù•Âà∞ÔºåÊàëÁöÑÂüéÂ∏Ç",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/heze_1.JPG", caption: "Áâ°‰∏πÂõ≠ÁõõÂºÄÁöÑÁâ°‰∏π" },
                        { url: "https://pic.tangsong.qzz.io/birthday/heze_2.jpg", caption: "ÊõπÂ∑ûÁâ°‰∏π" },
                        { url: "https://pic.tangsong.qzz.io/birthday/heze_3.jpg", caption: "ËèèÊ≥ΩÁâ°‰∏πÊñáÂåñ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/heze_4.jpg", caption: "ËèèÊ≥ΩÂüéÂ∏ÇÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/heze_5.jpg", caption: "ËèèÊ≥ΩÂéÜÂè≤ÈÅóËøπ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/heze_6.jpg", caption: "ËèèÊ≥ΩËá™ÁÑ∂ÊôØËßÇ" }
                    ],
                    iconColor: "#d300c5"
                },
                {
                    latlng: [55.7558, 37.6173],
                    title: "Ëé´ÊñØÁßë",
                    content: "ÊàëÁöÑÁ¨¨‰∏ÄÊ¨°Âá∫ÂõΩ",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/mosike_1.jpg", caption: "Á∫¢Âú∫Â§úÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/mosike_2.jpg", caption: "Âú£Áì¶Ë•øÈáåÂ§ßÊïôÂ†Ç" },
                        { url: "https://pic.tangsong.qzz.io/birthday/mosike_3.jpg", caption: "Ëé´ÊñØÁßëÂüéÂ∏ÇÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/mosike_4.jpg", caption: "Ëé´ÊñØÁßëÂéÜÂè≤Âª∫Á≠ë" },
                        { url: "https://pic.tangsong.qzz.io/birthday/mosike_5.jpg", caption: "Ëé´ÊñØÁßëÊñáÂåñÊôØËßÇ" }
                    ],
                    iconColor: "#ff2a6d"
                },
                {
                    latlng: [69.5985, 31.7827],
                    title: "Êë©Â∞îÊõºÊñØÂÖã",
                    content: "ÁúüÊºÇ‰∫ÆÂïä",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/moermansike_1.jpg", caption: "ÂåóÊûÅÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/moermansike_2.jpg", caption: "ÈòøÂªñÊ≤ôÁ∫™ÂøµÁ¢ë" },
                        { url: "https://pic.tangsong.qzz.io/birthday/moermansike_3.jpg", caption: "Êë©Â∞îÊõºÊñØÂÖãÊ∏ØÂè£" },
                        { url: "https://pic.tangsong.qzz.io/birthday/moermansike_4.jpg", caption: "Êë©Â∞îÊõºÊñØÂÖãÂüéÂ∏ÇÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/moermansike_5.jpg", caption: "Êë©Â∞îÊõºÊñØÂÖãËá™ÁÑ∂ÊôØËßÇ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/moermansike_6.jpg", caption: "Êë©Â∞îÊõºÊñØÂÖãÊûÅÂÖâ" }
                    ],
                    iconColor: "#05d9e8"
                },
                {
                    latlng: [7.8804, 98.3923],
                    title: "ÊôÆÂêâÂ≤õ",
                    content: "Ê≥∞ÂõΩÊúÄÂ§ßÁöÑÂ≤õÂ±øÔºåÁÉ≠Â∏¶Â§©Â†Ç",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/pujidao_1.jpg", caption: "Ëä≠‰∏úÊµ∑Êª©" },
                        { url: "https://pic.tangsong.qzz.io/birthday/pujidao_2.jpg", caption: "ÊôÆÂêâÂ≤õÊó•ËêΩ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/pujidao_3.jpg", caption: "ÊôÆÂêâÂ≤õÊµ∑Êª©" },
                        { url: "https://pic.tangsong.qzz.io/birthday/pujidao_4.jpg", caption: "ÊôÆÂêâÂ≤õÁÉ≠Â∏¶È£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/pujidao_5.jpg", caption: "ÊôÆÂêâÂ≤õËá™ÁÑ∂ÊôØËßÇ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/pujidao_6.jpg", caption: "ÊôÆÂêâÂ≤õÂ∫¶ÂÅáÈ£éÊÉÖ" }
                    ],
                    iconColor: "#d300c5"
                },
                {
                    latlng: [40.8424, 111.7496],
                    title: "ÂëºÂíåÊµ©Áâπ",
                    content: "Ëã±ÂßøÈ£íÁàΩ",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/huhehaote_1.jpg", caption: "ÂëºÂíåÊµ©ÁâπËçâÂéüÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/huhehaote_2.jpg", caption: "ÂÜÖËíôÂè§Â§ßËçâÂéü" },
                        { url: "https://pic.tangsong.qzz.io/birthday/huhehaote_3.jpg", caption: "ÂëºÂíåÊµ©ÁâπÂüéÂ∏ÇÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/huhehaote_4.jpg", caption: "ÂÜÖËíôÂè§ÊñáÂåñÊôØËßÇ" }
                    ],
                    iconColor: "#05d9e8"
                },
                {
                    latlng: [35.6895, 139.6917],
                    title: "‰∏ú‰∫¨",
                    content: "Êà∑ÈöêÁ•ûÁ§æÁúüÊºÇ‰∫Æ",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/dongjing_1.jpg", caption: "‰∏ú‰∫¨Â°îÂ§úÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/dongjing_2.jpg", caption: "Ê∂©Ë∞∑ÂçÅÂ≠óË∑ØÂè£" },
                        { url: "https://pic.tangsong.qzz.io/birthday/dongjing_3.jpg", caption: "‰∏ú‰∫¨ÂüéÂ∏ÇÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/dongjing_4.jpg", caption: "‰∏ú‰∫¨Áé∞‰ª£Âª∫Á≠ë" },
                        { url: "https://pic.tangsong.qzz.io/birthday/dongjing_5.jpg", caption: "‰∏ú‰∫¨‰º†ÁªüÊñáÂåñ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/dongjing_6.jpg", caption: "‰∏ú‰∫¨Ë°óÂ§¥ÊôØË±°" },
                        { url: "https://pic.tangsong.qzz.io/birthday/dongjing_7.jpg", caption: "‰∏ú‰∫¨Â§úÁîüÊ¥ª" }
                    ],
                    iconColor: "#ff2a6d"
                },
                {
                    latlng: [43.0618, 141.3545],
                    title: "Êú≠Âπå",
                    content: "Ê≤°ÊÉ≥Âà∞Êàë‰ª¨‰πüÊù•Âà∞‰∫ÜÂåóÊµ∑ÈÅì",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/zhahuang_1.jpg", caption: "Êú≠ÂπåÈõ™Á•≠" },
                        { url: "https://pic.tangsong.qzz.io/birthday/zhahuang_2.jpg", caption: "Êú≠ÂπåÈíüÊ•º" },
                        { url: "https://pic.tangsong.qzz.io/birthday/zhahuang_3.jpg", caption: "Êú≠ÂπåÂüéÂ∏ÇÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/zhahuang_4.jpg", caption: "Êú≠ÂπåÂÜ¨Â≠£ÊôØËßÇ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/zhahuang_5.jpg", caption: "Êú≠ÂπåÊñáÂåñÊôØÁÇπ" }
                    ],
                    iconColor: "#05d9e8"
                },
                {
                    latlng: [22.5431, 114.0579],
                    title: "Ê∑±Âú≥ ÂÜçÊ¨°Âá∫Âèë",
                    content: "ÂõûÂà∞Ëµ∑ÁÇπÔºåÂºÄÂßãÊñ∞ÁöÑÊóÖÁ®ã",
                    photos: [
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_4.jpg", caption: "Ê∑±Âú≥Â∏Ç‰∏≠ÂøÉÁöÑÁπÅÂçéÊôØË±°" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_5.jpg", caption: "Ê∑±Âú≥ÊπæÁöÑÁæé‰∏ΩÊó•ËêΩ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_6.jpg", caption: "Ê∑±Âú≥ÊπæÂÖ¨Âõ≠" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_7.jpg", caption: "Ê∑±Âú≥Â§úÊôØ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_9.jpg", caption: "Ê∑±Âú≥ÂüéÂ∏ÇÈ£éÂÖâ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_10.jpg", caption: "Ê∑±Âú≥Âú∞Ê†áÂª∫Á≠ë" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_11.jpg", caption: "Ê∑±Âú≥Áé∞‰ª£ÊôØËßÇ" },
                        { url: "https://pic.tangsong.qzz.io/birthday/shenzhen_3.jpg", caption: "Ê∑±Âú≥Â§úÊôØ" }
                    ],
                    iconColor: "#d300c5"
                }
            ];
            
            // ÂàõÂª∫ËøûÁ∫ø
            const latlngs = memories.map(m => m.latlng);
            const polyline = L.polyline(latlngs, {
                color: '#05d9e8',
                weight: 2,
                dashArray: '10, 10',
                lineJoin: 'round'
            }).addTo(map);
            
            // Âä®ÁîªÁªòÂà∂Ë∑ØÂæÑ
            polyline._path.classList.add('path-animation');
            
            // Ê∑ªÂä†ËÆ∞ÂøÜÁÇπÊ†áËÆ∞
            memories.forEach(memory => {
                const marker = L.circleMarker(memory.latlng, {
                    radius: 8,
                    fillColor: memory.iconColor,
                    color: "#fff",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(map);
                
                // ÂàõÂª∫ÁÖßÁâáÁº©Áï•ÂõæHTML
                const thumbnailsHTML = memory.photos.map((photo, index) => `
                    <img src="${photo.url}" class="photo-thumbnail" 
                         onclick="showSpecificPhoto(${JSON.stringify(memory.photos)}, ${index})"
                         title="${photo.caption}">
                `).join('');
                
                marker.bindPopup(`
                    <div style="background: #0d0221; color: white; padding: 10px; border: 1px solid ${memory.iconColor}; max-width: 300px;">
                        <h3 style="margin: 0 0 5px 0; color: ${memory.iconColor};">${memory.title}</h3>
                        <p style="margin: 0 0 10px 0;">${memory.content}</p>
                        <div style="text-align: center;">
                            <button onclick="showLocationPhotos(${JSON.stringify(memory).replace(/"/g, '&quot;')})" 
                                    style="background: ${memory.iconColor}; border: none; padding: 5px 10px; cursor: pointer; color: #0d0221;">
                                Êü•ÁúãËÆ∞ÂøÜ (${memory.photos.length}Âº†)
                            </button>
                        </div>
                        <div class="thumbnail-container">
                            ${thumbnailsHTML}
                        </div>
                    </div>
                `);
                
                // Ê∑ªÂä†ËÑâÂÜ≤Âä®Áîª
                setInterval(() => {
                    marker.setStyle({
                        fillOpacity: 0.4 + Math.random() * 0.6
                    });
                }, 1000);
            });
            
            // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
            document.getElementById('location-count').textContent = memories.length;
            document.getElementById('total-distance').textContent = "12,345";
            
            // Ë∞ÉÊï¥Âú∞ÂõæËßÜÂõæ
            map.fitBounds(polyline.getBounds(), { padding: [50, 50] });
        }
        
        // ÂΩìÂâçÂ±ïÁ§∫ÁöÑ‰ΩçÁΩÆÁÖßÁâáÊï∞ÊçÆ
        let currentLocationPhotos = [];
        let currentPhotoIndex = 0;

        // ÊòæÁ§∫ÁâπÂÆöÂú∞ÁÇπÁöÑÁÖßÁâáÈõÜ
        function showLocationPhotos(memory) {
            currentLocationPhotos = memory.photos;
            currentPhotoIndex = 0;
            updatePhotoModal();
            document.getElementById('photo-modal').style.display = 'block';
            
            // Ê∑ªÂä†ÁÖßÁâáÂ¢ôÊ†áÈ¢ò
            const modalTitle = document.querySelector('.modal-content h3');
            if (modalTitle) {
                modalTitle.textContent = `${memory.title} - ËÆ∞ÂøÜÁÖßÁâáÂ¢ô (${memory.photos.length}Âº†)`;
            }
            
            // Ê∑ªÂä†ÈîÆÁõò‰∫ã‰ª∂ÁõëÂê¨
            document.addEventListener('keydown', handleKeyDown);
        }
        
        // ÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞
        function handleKeyDown(e) {
            if (document.getElementById('photo-modal').style.display === 'block') {
                if (e.key === 'ArrowLeft') {
                    plusSlides(-1);
                } else if (e.key === 'ArrowRight') {
                    plusSlides(1);
                }
            }
        }

        // ÊòæÁ§∫ÁâπÂÆöÁ¥¢ÂºïÁöÑÁÖßÁâá
        function showSpecificPhoto(photos, index) {
            currentLocationPhotos = photos;
            currentPhotoIndex = index;
            updatePhotoModal();
            document.getElementById('photo-modal').style.display = 'block';
            
            // ÊªöÂä®Âà∞ÂΩìÂâçÈÄâ‰∏≠ÁöÑÁº©Áï•Âõæ
            setTimeout(() => {
                const activeThumb = document.querySelector('.photo-thumbnail[style*="scale(1.1)"]');
                if (activeThumb) {
                    activeThumb.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }
            }, 100);
        }

        // Êõ¥Êñ∞ÁÖßÁâáÊ®°ÊÄÅÊ°ÜÂÜÖÂÆπ
        function updatePhotoModal() {
            if (currentLocationPhotos.length === 0) return;
            
            const modal = document.getElementById('photo-modal');
            const photo = currentLocationPhotos[currentPhotoIndex];
            
            // Êõ¥Êñ∞‰∏ªÁÖßÁâá
            const mainImg = modal.querySelector('img');
            mainImg.src = photo.url;
            // ËÆæÁΩÆÂàùÂßãÁä∂ÊÄÅ‰∏∫Â∞èÂõæÊ®°Âºè
            mainImg.style.maxHeight = '60vh';
            mainImg.style.cursor = 'zoom-in';
            // Ê∑ªÂä†ÊèêÁ§∫ÊñáÊú¨
            const zoomHint = document.createElement('div');
            zoomHint.className = 'zoom-hint';
            zoomHint.textContent = 'ÁÇπÂáªÂõæÁâáÂèØÊîæÂ§ßÊü•ÁúãÂéüÂõæ';
            zoomHint.style.position = 'absolute';
            zoomHint.style.bottom = '10px';
            zoomHint.style.right = '10px';
            zoomHint.style.background = 'rgba(0, 0, 0, 0.7)';
            zoomHint.style.color = 'var(--neon-blue)';
            zoomHint.style.padding = '5px 10px';
            zoomHint.style.borderRadius = '5px';
            zoomHint.style.fontSize = '0.8rem';
            zoomHint.style.opacity = '0.8';
            
            // Ê∏ÖÈô§‰πãÂâçÁöÑÊèêÁ§∫ÔºàÂ¶ÇÊûúÊúâÔºâ
            const oldHint = modal.querySelector('.zoom-hint');
            if (oldHint) oldHint.remove();
            
            // Ê∑ªÂä†Êñ∞ÊèêÁ§∫
            modal.querySelector('.photo-slide').appendChild(zoomHint);
            
            mainImg.onclick = function() {
                // ÂàáÊç¢Â§ßÂõæÊü•ÁúãÊ®°Âºè
                if(this.style.maxHeight === '90vh') {
                    this.style.maxHeight = '60vh';
                    this.style.cursor = 'zoom-in';
                    zoomHint.textContent = 'ÁÇπÂáªÂõæÁâáÂèØÊîæÂ§ßÊü•ÁúãÂéüÂõæ';
                } else {
                    this.style.maxHeight = '90vh';
                    this.style.cursor = 'zoom-out';
                    zoomHint.textContent = 'ÁÇπÂáªÂõæÁâáÂèØÁº©Â∞è';
                }
            };
            modal.querySelector('.photo-caption').textContent = 
                `${photo.caption} (${currentPhotoIndex + 1}/${currentLocationPhotos.length})`;
            
            // Êõ¥Êñ∞Áº©Áï•ÂõæÂÆπÂô®
            const thumbnailContainer = document.getElementById('thumbnail-container');
            thumbnailContainer.innerHTML = currentLocationPhotos.map((p, i) => `
                <img src="${p.url}" class="photo-thumbnail" 
                     onclick="showSpecificPhoto(currentLocationPhotos, ${i})"
                     style="${i === currentPhotoIndex ? 'border-color: var(--neon-pink); transform: scale(1.1);' : ''}"
                     title="${p.caption}"
                     style="--photo-index: ${i}; ${i === currentPhotoIndex ? 'border-color: var(--neon-pink); transform: scale(1.1);' : ''}">
            `).join('');
            
            // ÈáçÁΩÆÂä®Áîª
            setTimeout(() => {
                const thumbnails = thumbnailContainer.querySelectorAll('.photo-thumbnail');
                thumbnails.forEach((thumbnail, index) => {
                    thumbnail.addEventListener('click', function() {
                        const modal = document.getElementById('photo-modal');
                        const photoSlide = modal.querySelector('.photo-slide');
                        const img = photoSlide.querySelector('img');
                        const caption = photoSlide.querySelector('.photo-caption');
                
                        img.src = thumbnail.src;
                        caption.textContent = `ÁÖßÁâá ${index + 1}`;
                
                        modal.style.display = 'block';
                        photoSlide.style.display = 'block';
                    });
                });
                
                const closeModal = (modalId) => {
                    const modal = document.getElementById(modalId);
                    modal.style.display = 'none';
                    const photoSlide = modal.querySelector('.photo-slide');
                    photoSlide.style.display = 'none';
                };
            }, 50);
        }

        // ÁÖßÁâáÂØºËà™
        function plusSlides(n) {
            currentPhotoIndex += n;
            if (currentPhotoIndex >= currentLocationPhotos.length) currentPhotoIndex = 0;
            if (currentPhotoIndex < 0) currentPhotoIndex = currentLocationPhotos.length - 1;
            updatePhotoModal();
            
            // ÊªöÂä®Âà∞ÂΩìÂâçÈÄâ‰∏≠ÁöÑÁº©Áï•Âõæ
            setTimeout(() => {
                const activeThumb = document.querySelector('.photo-thumbnail[style*="scale(1.1)"]');
                if (activeThumb) {
                    activeThumb.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }
            }, 100);
        }
        
        // ÊéßÂà∂Âè∞‰∫§‰∫í
        function setupConsole() {
            const consoleInput = document.getElementById('console-input');
            const consoleOutput = document.getElementById('console-output');
            
            consoleInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const command = consoleInput.value.trim();
                    consoleInput.value = '';
                    
                    // Ê∑ªÂä†ËæìÂÖ•Âà∞ÊéßÂà∂Âè∞
                    const inputLine = document.createElement('div');
                    inputLine.className = 'console-line';
                    inputLine.innerHTML = `<span class="prompt">></span> ${command}`;
                    consoleOutput.appendChild(inputLine);
                    
                    // Â§ÑÁêÜÂëΩ‰ª§
                    processCommand(command);
                    
                    // ÊªöÂä®Âà∞Â∫ïÈÉ®
                    consoleOutput.scrollTop = consoleOutput.scrollHeight;
                }
            });
        }
        
        function processCommand(command) {
            const consoleOutput = document.getElementById('console-output');
            const response = document.createElement('div');
            response.className = 'console-line';
            
            switch(command.toLowerCase()) {
                case 'help':
                    response.innerHTML = `
                        ÂèØÁî®ÂëΩ‰ª§:<br>
                        - HELP: ÊòæÁ§∫Ê≠§Â∏ÆÂä©<br>
                        - MEMORIES: ÊòæÁ§∫ËÆ∞ÂøÜÁÇπÊï∞Èáè<br>
                        - LOVE: ÁâπÊÆäÂëΩ‰ª§<br>
                        - GLITCH: ÊøÄÊ¥ªÊïÖÈöúÊïàÊûú<br>
                        - CLEAR: Ê∏ÖÁ©∫ÊéßÂà∂Âè∞<br>
                        - ‰Ω†ÁöÑÂêçÂ≠ó: Ëß¶ÂèëÂΩ©Ëõã
                    `;
                    break;
                case 'memories':
                    response.textContent = `Á≥ªÁªüËÆ∞ÂΩïÁöÑËÆ∞ÂøÜÁÇπÊï∞Èáè: ${document.getElementById('location-count').textContent}`;
                    break;
                case 'love':
                    response.innerHTML = `<span style="color: var(--neon-pink);">Á≥ªÁªüÊ£ÄÊµãÂà∞Êó†Ê≥ïÈáèÂåñÁöÑÊÉÖÊÑüÊï∞ÊçÆ...</span>`;
                    break;
                case 'glitch':
                    activateGlitch();
                    response.textContent = "ÊøÄÊ¥ªÊïÖÈöúÊïàÊûú...";
                    break;
                case 'clear':
                    consoleOutput.innerHTML = '';
                    return; // ‰∏çÊ∑ªÂä†ÂìçÂ∫îË°å
                case 'Ê∑ªÂáÄ':
                    const loveMessages = [
                        "‰ªäÂ§©ÊòØ‰Ω†30Â≤ÅÁîüÊó•,‰πüÊòØÂíå‰Ω†Áõ∏ËØÜÁöÑÁ¨¨ÂÖ´Âπ¥ÔºåÁªìÂ©öÁöÑÁ¨¨‰∏âÂπ¥ÔºåÊó∂Èó¥ÂÉèÊàë‰ª¨Ëá™È©æÊ∏∏Êó∂ÁõòÂ±±ÂÖ¨Ë∑ØÁöÑËΩ¨ËßíÔºåÊòéÊòéËÆ∞ÂæóÊØè‰∏™ËΩ¨ÂºØÊó∂ÁöÑÂøÉË∑≥ÔºåÂõûÂ§¥ÊúõÂéªÂç¥Â∑≤ÊòØ‰∏ÄË∑ØÁπÅËä±„ÄÇ",
                        "ËøòËÆ∞ÂæóÊç∑ÈáåÂà´Â∞îÂç°È£òÈõ™ÁöÑÂ§úÊôöÔºå‰Ω†Â∏¶ÁùÄÂéöÂéöÁöÑÊâãÂ•óÈÄóÂºÑË∑üËøáÊù•ÁöÑÈõ™Ê©áÁä¨Ôºå‰ª•Èò≤Êö¥Èõ™Â∞ÅË∑ØÊàë‰ª¨‰∏ãÂÆöÂÜ≥ÂøÉËøûÂ§úÊâæËΩ¶ÈÄÉÁ¶ªÔºõÊë©Â∞îÊõºÊñØÂÖãÂáõÂÜΩÁöÑÂØíÈ£é‰∏ãÔºåÊàë‰ª¨Á´ôÂú®ÈòøÂªñÊ≤ôÂÖ¨Âõ≠ÁöÑÊúÄÈ´òÁÇπÔºåÁú∫ÊúõËøúÂ§ÑÁöÑÁ†ÅÂ§¥ÂíåÊùëÂ∫Ñ„ÄÇËøô‰∫õÊóÖÁ®ãÂÉèÂõ¥Â∑æ‰∏ÄËà¨ÔºåÈíàËÑöÁªÜÂØÜÂç¥Ê∏©ÊöñË∏èÂÆû„ÄÇÂêéÊù•Êàë‰ª¨ÂéªËøáÁöÑÂú∞ÊñπÔºåÂú∞Âõæ‰∏äÈÉΩÂèòÊàê‰∫Ü‰∏ìÂ±ûÁöÑÂùêÊ†á‚Äî‚ÄîÊõºË∞∑ÁöÑÂ§ßÁöáÂÆ´ÔºåÊôÆÂêâÂ≤õÁöÑÊµ™Ëä±ÔºåÈïøÈáéÁöÑÊà∑ÈöêÁ•ûÁ§æÔºåÂáΩÈ¶ÜÂ±±ÁöÑÂ§ßÈõ™ÔºåÂåóÊµ∑ÈÅìÁöÑÊ∏©Ê≥âÈõæÊ∞î„ÄÇ",
                        "Â∑•‰ΩúÂêéÁöÑÊÑüÊÉÖÂ∞ë‰∫Ü‰∫õËΩ∞ËΩ∞ÁÉàÁÉàÔºåÂÄíÂÉè‰∏ÄÁ¢óÊ°ÇËä±ÈÜ™Á≥üÔºåÁîúÂë≥Ê≤âÊ∑ÄÂú®ÁîüÊ¥ªË§∂Áö±Èáå„ÄÇ‰∏ãÁè≠Âíå‰Ω†‰∏ÄÂùóÂõûÂÆ∂ÔºåÂú®ÂÆ¢ÂéÖÈáåÁúã‰Ω†ÂÅöÈ•≠ÔºåÈÄó‰∏Ä‰ºöÁå´Áå´ÔºåÊó∂‰∏çÊó∂ÂéªÂé®ÊàøÊâìÊâì‰∏ãÊâãÔºå‰∏ÄÂùóËæπÁúãÁªºËâ∫ËäÇÁõÆËæπÂêÉÈ•≠„ÄÇ\nÊàëÂÅ∂Â∞î‰ºöÊÉ≥,Â¶ÇÊûúÊàëÁé∞Âú®ËøòÊòØ‰∏Ä‰∏™‰∫∫Ôºå‰ºöËøáÁùÄÊÄéÊ†∑ÁöÑÁîüÊ¥ªÂë¢ÔºåËÇØÂÆöÊòØÂçïË∞ÉÊó†Ë∂£ÁöÑÔºåÂ¶ÇÂêå‰Ω†‰∏çÂú®ÁöÑÂë®Êú´„ÄÇ",
                        "30Â≤ÅÊòØÊñ∞ÁöÑËµ∑ÁÇπ,‰ΩÜÂØπÊàëËÄåË®ÄÔºå‰Ω†‰æùÁÑ∂ÊòØÈÇ£‰∏™Âú®È¶ñÊ¨°Ëá™È©æÂú®ÂçóÊæ≥Â§ßÊ°•‰∏äÊ¨¢ÂëºÈõÄË∑ÉÁöÑÂßëÂ®ò„ÄÇË∞¢Ë∞¢‰Ω†ËÆ©Êàë‰ªé'ÂÆÖÁî∑'ÂèòÊàê'ÊóÖ‰∫∫'Ôºå‰ªé'Êú®Â§¥'ÂèòÊàê‰ºöÁ¨®ÊãôË°®ËææÁà±ÁöÑ‰∏àÂ§´„ÄÇÂæÄÂêé‰ΩôÁîüÔºåÊÉ≥Âíå‰Ω†ÁªßÁª≠Êî∂ÈõÜÊõ¥Â§öÂπ≥Âá°ÁöÑÁû¨Èó¥ÔºöÂèØËÉΩÊòØÊâìÂèå‰∫∫Ê∏∏ÊàèÊó∂ÁöÑ‰∫íÁõ∏Âò≤ËÆΩÔºåÂèØËÉΩÊòØÂú®‰Ω†ÁîªÁîªÊó∂ÈÄíËøáÂéªÁöÑ‰∏ÄÊùØÁÉ≠Ê∞¥ÔºåÂèØËÉΩÊòØÊàëÂú®Â∑•‰ΩúÊó∂‰Ω†Á™ÅÁÑ∂ÂÜ≤ËøáÊù•ÁöÑ‰∏Ä‰∏™Êã•Êä±„ÄÇ",
                        "Êàë‰æùÁÑ∂Ê≤°ËÆ∞‰Ωè‰Ω†Âú®ÁªìÂ©öÂÖ∏Á§º‰∏äÁöÑÈÇ£Âè•‰ªÄ‰πàÊ†ë‰ªÄ‰πàÈ£éÊòØÊÄé‰πàËØ¥ÁöÑÔºåÂè™Â•ΩÁî®ÁÆÄÂçïÁöÑËØùËØ≠ÈÄÅ‰∏äÊàëÁöÑÁ•ùÁ¶è„ÄÇ",
                        "ÁîüÊó•Âø´‰πêÔºåÊàëÁöÑÂßëÂ®ò„ÄÇ",
                        "Ê∞∏ËøúÔºåÁà±‰Ω†Â¶ÇÂàùÔºÅ"
                    ];
                    document.getElementById('envelope-modal').style.display = 'block';
                    break;
                    
                    // ÊòæÁ§∫ÊâÄÊúâË°åÔºåÈÄêÂ≠óÊòæÁ§∫
                    for (let i = 0; i < loveMessages.length; i++) {
                        setTimeout(() => {
                            const loveLine = document.createElement('div');
                            loveLine.className = 'console-line';
                            consoleOutput.appendChild(loveLine);
                            
                            let charIndex = 0;
                            const message = loveMessages[i];
                            const interval = setInterval(() => {
                                if (charIndex < message.length) {
                                    loveLine.innerHTML = message.substring(0, charIndex + 1);
                                    charIndex++;
                                    consoleOutput.scrollTop = consoleOutput.scrollHeight;
                                } else {
                                    clearInterval(interval);
                                }
                            }, 100);
                        }, 2000 + (i - 4) * 1000);
                    }
                    break;
                default:
                    response.textContent = `Êú™Áü•ÂëΩ‰ª§: ${command}`;
            }
            
            consoleOutput.appendChild(response);
        }
        
        // ÊïÖÈöúÊïàÊûú
        function activateGlitch() {
            document.body.classList.add('glitch-effect');
            
            // Êí≠ÊîæalarmÈü≥Êïà
            var alarmSound = new Audio('sounds/alarm.mp3');
            alarmSound.play();
            
            setTimeout(() => {
                document.body.classList.remove('glitch-effect');
                // ÂÅúÊ≠¢Èü≥Êïà
                alarmSound.pause();
            }, 1800);
            
            // Ê∑ªÂä†ÊïÖÈöúÊ†∑Âºè
            const style = document.createElement('style');
            style.id = 'glitch-style';
            style.textContent = `
                @keyframes glitch {
                    0% { filter: hue-rotate(0deg); }
                    20% { filter: hue-rotate(90deg); }
                    40% { filter: hue-rotate(180deg) blur(1px); }
                    60% { filter: hue-rotate(270deg); }
                    80% { filter: hue-rotate(360deg) blur(2px); }
                    100% { filter: hue-rotate(0deg); }
                }
                .glitch-effect {
                    animation: glitch 0.5s linear;
                }
                
                @keyframes textGlitch {
                    0% { transform: translate(0); text-shadow: 0 0 5px var(--neon-pink); }
                    10% { transform: translate(-2px, 2px); text-shadow: 0 0 10px var(--neon-blue); }
                    20% { transform: translate(2px, -2px); text-shadow: 0 0 15px var(--neon-purple); }
                    30% { transform: translate(-2px, -2px); text-shadow: 0 0 10px var(--neon-pink); }
                    40% { transform: translate(2px, 2px); text-shadow: 0 0 5px var(--neon-blue); }
                    50% { transform: translate(-1px, 1px); text-shadow: 0 0 15px var(--neon-purple); }
                    60% { transform: translate(1px, -1px); text-shadow: 0 0 10px var(--neon-pink); }
                    70% { transform: translate(-1px, -1px); text-shadow: 0 0 5px var(--neon-blue); }
                    80% { transform: translate(1px, 1px); text-shadow: 0 0 10px var(--neon-purple); }
                    90% { transform: translate(0); text-shadow: 0 0 15px var(--neon-pink); }
                    100% { transform: translate(0); text-shadow: 0 0 5px var(--neon-blue); }
                }
                
                @keyframes warningFlash {
                    0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                        opacity: 1;
                        color: var(--neon-pink);
                        text-shadow: 0 0 10px var(--neon-pink), 0 0 20px var(--neon-pink);
                    }
                    20%, 24%, 55% {
                        opacity: 0.8;
                        color: var(--neon-blue);
                        text-shadow: 0 0 5px var(--neon-blue);
                    }
                }
                
                @keyframes scanLine {
                    0% {
                        transform: translateY(-100%);
                    }
                    100% {
                        transform: translateY(100%);
                    }
                }
                
                .warning-container {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    z-index: 9999;
                    background-color: rgba(13, 2, 33, 0.7);
                    pointer-events: none;
                    overflow: hidden;
                }
                
                .warning-text {
                    font-size: 6rem;
                    font-weight: bold;
                    text-transform: uppercase;
                    animation: textGlitch 0.3s infinite, warningFlash 1.5s infinite alternate;
                    letter-spacing: 2px;
                    margin: 10px 0;
                }
                
                .scan-line {
                    position: absolute;
                    width: 100%;
                    height: 5px;
                    background: linear-gradient(90deg, transparent, var(--neon-blue), transparent);
                    animation: scanLine 2s linear infinite;
                }
                
                .glitch-overlay {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: repeating-linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.1),
                        rgba(0, 0, 0, 0.1) 1px,
                        transparent 1px,
                        transparent 2px
                    );
                    pointer-events: none;
                    z-index: 1;
                }
            `;
            document.head.appendChild(style);
            
            // ÂàõÂª∫Ë≠¶ÂëäÂÆπÂô®
            const warningContainer = document.createElement('div');
            warningContainer.className = 'warning-container';
            
            // Ê∑ªÂä†Êâ´ÊèèÁ∫ø
            const scanLine1 = document.createElement('div');
            scanLine1.className = 'scan-line';
            warningContainer.appendChild(scanLine1);
            
            // Ê∑ªÂä†ÊïÖÈöúÁ∫øÊù°Ë¶ÜÁõñÂ±Ç
            const glitchOverlay = document.createElement('div');
            glitchOverlay.className = 'glitch-overlay';
            warningContainer.appendChild(glitchOverlay);
            
            // Ê∑ªÂä†Ë≠¶ÂëäÊñáÊú¨
            const warningText1 = document.createElement('div');
            warningText1.className = 'warning-text';
            warningText1.textContent = 'Âç±Èô©ÔºÅ';
            warningContainer.appendChild(warningText1);
            
            const warningText2 = document.createElement('div');
            warningText2.className = 'warning-text';
            warningText2.textContent = 'Áà±ÊÑèÊ∫¢Âá∫ÔºÅ';
            warningContainer.appendChild(warningText2);
            
            const warningText3 = document.createElement('div');
            warningText3.className = 'warning-text';
            warningText3.textContent = 'Á≥ªÁªüÊïÖÈöúÔºÅ';
            warningContainer.appendChild(warningText3);
            
            // Ê∑ªÂä†Á¨¨‰∫åÊù°Êâ´ÊèèÁ∫ø
            const scanLine2 = document.createElement('div');
            scanLine2.className = 'scan-line';
            scanLine2.style.animationDelay = '1s';
            warningContainer.appendChild(scanLine2);
            
            // Â∞ÜË≠¶ÂëäÂÆπÂô®Ê∑ªÂä†Âà∞body
            document.body.appendChild(warningContainer);
            
            // 3ÁßíÂêéÁßªÈô§Ë≠¶Âëä
            setTimeout(() => {
                document.body.removeChild(warningContainer);
            }, 3000);
            
            // Ê∑ªÂä†ÊéßÂà∂Âè∞Ê∂àÊÅØ
            const consoleOutput = document.getElementById('console-output');
            const line = document.createElement('div');
            line.className = 'console-line';
            line.innerHTML = `<span style="color: var(--neon-purple);">Ë≠¶Âëä: Á≥ªÁªüÂá∫Áé∞ÊïÖÈöúÊïàÊûú! Ê£ÄÊµãÂà∞Áà±ÊÑèÊ∫¢Âá∫!</span>`;
            consoleOutput.appendChild(line);
        }
        
        // ÂàùÂßãÂåñÈ°µÈù¢
        function initPage() {
            animateAgeCounter();
            initMap();
            setupConsole();
            
            // Ê∑ªÂä†ÊéßÂà∂Âè∞Ê¨¢ËøéÊ∂àÊÅØ
            setTimeout(() => {
                const consoleOutput = document.getElementById('console-output');
                const line = document.createElement('div');
                line.className = 'console-line';
                line.innerHTML = `<span style="color: var(--neon-pink);">> Á≥ªÁªüÂáÜÂ§áÂ∞±Áª™! ËæìÂÖ• HELP Ëé∑ÂèñÂëΩ‰ª§ÂàóË°®</span>`;
                consoleOutput.appendChild(line);
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            }, 2000);
            
            // ÊéßÂà∂Âè∞ÈöèÊú∫Ê∂àÊÅØ
            const messages = [
                "> Ê£ÄÊµãÂà∞È´òÊµìÂ∫¶Âπ∏Á¶èÊåáÊï∞...",
                "> Ë≠¶Âëä: Á¨ëÂÆπÊï∞ÊçÆË∂ÖÂá∫Ê≠£Â∏∏ËåÉÂõ¥!",
                "> ËæìÂÖ•'‰Ω†ÁöÑÂêçÂ≠ó'ÊúâÊÉäÂñú!",
                "> Ê≠£Âú®ËÆ°ÁÆó‰∏ãÊ¨°ÂÜíÈô©Ë∑ØÁ∫ø...",
                "> ËÆ∞ÂøÜÂ≠òÂÇ®Á©∫Èó¥Ââ©‰Ωô: ‚àû",
                "> ËæìÂÖ•'‰Ω†ÁöÑÂêçÂ≠ó'ÊúâÊÉäÂñú!",
                "> ÁîüÊó•Á•ùÁ¶èÊ®°ÂùóÂ∑≤ÊøÄÊ¥ª: 30Â≤ÅÂø´‰πê!",
                "> Á≥ªÁªüÊ£ÄÊµãÂà∞Â§ßÈáèÁæéÂ•ΩÂõûÂøÜÊï∞ÊçÆ...",
                "> ËæìÂÖ•'‰Ω†ÁöÑÂêçÂ≠ó'ÊúâÊÉäÂñú!",
                "> Ë≠¶Âëä: ÂèØÁà±Â∫¶Á™ÅÁ†¥Â§©ÈôÖ!",
                "> Ê≠£Âú®Âä†ËΩΩÁâπÂà´ÁîüÊó•ÊÉäÂñú...",
                "> Âª∫ËÆÆ: ‰ªäÂ§©ÂèØ‰ª•‰ªªÊÄß‰∏ÄÊï¥Â§©!"
            ];
            
            setInterval(() => {
                if (Math.random() > 0.7) {
                    const consoleOutput = document.getElementById('console-output');
                    const line = document.createElement('div');
                    line.className = 'console-line';
                    line.textContent = messages[Math.floor(Math.random() * messages.length)];
                    consoleOutput.appendChild(line);
                    consoleOutput.scrollTop = consoleOutput.scrollHeight;
                }
            }, 5000);
        }
        
        // ÊòæÁ§∫Ê®°ÊÄÅÊ°ÜÂáΩÊï∞
        function showModal(modalType) {
            if(modalType === 'photos') {
                // Ëé∑ÂèñÂú∞Âõæ‰∏≠ÂÆö‰πâÁöÑmemoriesÂèòÈáè
                const mapMemories = window.memories || [];
                
                // ÂàùÂßãÂåñÁÖßÁâáÊï∞ÊçÆ - ‰ΩøÁî®memoriesÊï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÁÖßÁâá
                currentLocationPhotos = [];
                
                // ‰ªéÊâÄÊúâËÆ∞ÂøÜÁÇπÊî∂ÈõÜÁÖßÁâá
                mapMemories.forEach(memory => {
                    memory.photos.forEach(photo => {
                        // Ê∑ªÂä†‰ΩçÁΩÆ‰ø°ÊÅØÂà∞ÁÖßÁâáÊ†áÈ¢ò
                        currentLocationPhotos.push({
                            url: photo.url,
                            caption: `${memory.title} - ${photo.caption}`
                        });
                    });
                });
                
                if (currentLocationPhotos.length > 0) {
                    currentPhotoIndex = 0;
                    updatePhotoModal();
                    document.getElementById('photo-modal').style.display = 'block';
                    
                    // Ê∑ªÂä†ÁÖßÁâáÂ¢ôÊ†áÈ¢ò
                    const modalTitle = document.querySelector('.modal-content h3');
                    if (modalTitle) {
                        modalTitle.textContent = `ËÆ∞ÂøÜÁÖßÁâáÂ¢ô (${currentLocationPhotos.length}Âº†)`;
                    }
                } else {
                    console.error('Êó†Ê≥ïËé∑ÂèñÁÖßÁâáÊï∞ÊçÆÔºåËØ∑Á°Æ‰øùÈ°µÈù¢Â∑≤ÂÆåÂÖ®Âä†ËΩΩ');
                    // Ê∑ªÂä†‰∏Ä‰∏™ÊèêÁ§∫‰ø°ÊÅØÂà∞ÊéßÂà∂Âè∞
                    const consoleOutput = document.getElementById('console-output');
                    if (consoleOutput) {
                        const line = document.createElement('div');
                        line.className = 'console-line';
                        line.innerHTML = `<span style="color: var(--neon-pink);">Á≥ªÁªüÈîôËØØ: ËÆ∞ÂøÜÊï∞ÊçÆÂ∞öÊú™Âä†ËΩΩÂÆåÊàêÔºåËØ∑Á®çÂêéÂÜçËØï!</span>`;
                        consoleOutput.appendChild(line);
                        consoleOutput.scrollTop = consoleOutput.scrollHeight;
                    }
                }
            }
        }
        
        // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°ÜÂáΩÊï∞
        function closeModal(modalType) {
            // ÁßªÈô§ÈîÆÁõò‰∫ã‰ª∂ÁõëÂê¨
            document.removeEventListener('keydown', handleKeyDown);
            if(modalType === 'photos') {
                document.getElementById('photo-modal').style.display = "none";
            }
        }
        
        // ÁÇπÂáªÈ°µÈù¢‰ªª‰ΩïÂú∞ÊñπÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
        window.onclick = function(event) {
            if (event.target.className === 'modal') {
                event.target.style.display = "none";
            }
        }
    </script>
</body>
</html>
<div id="speaker-icon" style="position: absolute; top: 10px; right: 10px; cursor: pointer;">üîä</div>